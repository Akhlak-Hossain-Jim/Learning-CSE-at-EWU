Here is a well-structured solution, making it easy for you to copy, paste, and use for your assignment. Each lab is presented with:  
- All provided code blocks (procedures, triggers, functions, etc.)  
- Complete solutions to every unsolved problem as requested, written in both Markdown (.md for documentation/submission) and SQL (.sql for direct database use).

***

# Lab 4 (PL/SQL Procedures, Functions, Triggers)

**CSE464_Lab4.md**

## Provided Code Blocks
```sql
-- Procedure that prints a welcome message
CREATE OR REPLACE PROCEDURE welcome
IS
BEGIN
    DBMS_OUTPUT.PUT_LINE('WELCOME TO PROCEDURE');
END;
/

-- Insert an employee
CREATE OR REPLACE PROCEDURE INSERT_EMPLOYEE
(E_ID IN NUMBER, NAME IN VARCHAR2, SALARY IN NUMBER)
IS
BEGIN
    INSERT INTO EMPLOYEE VALUES(E_ID, NAME, SALARY);
END INSERT_EMPLOYEE;
/

-- Update employee salary and return updated salary using OUT parameter
CREATE OR REPLACE PROCEDURE update_emp(
    id     IN NUMBER,
    amount IN NUMBER,
    d      OUT NUMBER
)
IS
BEGIN
    UPDATE employee
    SET salary = salary + amount
    WHERE e_id = id;
    SELECT salary INTO d
    FROM employee
    WHERE e_id = id;
    DBMS_OUTPUT.PUT_LINE('Updated Salary: ' || d);
END update_emp;
/

-- Function to calculate bonus
CREATE OR REPLACE FUNCTION get_bonus (
    salary IN NUMBER
)
RETURN NUMBER
IS
    bonus NUMBER;
BEGIN
    bonus := salary * 0.10;
    RETURN bonus;
END get_bonus;
/

-- Trigger to backup deleted employee row
CREATE OR REPLACE TRIGGER T1
BEFORE DELETE ON EMPLOYEE
FOR EACH ROW
BEGIN
    INSERT INTO BACKUP_EMP VALUES(:OLD.E_ID,:OLD.NAME,:OLD.SALARY);
END;
/

-- Trigger to backup inserted employee row
CREATE OR REPLACE TRIGGER t2
AFTER INSERT ON EMPLOYEE
FOR EACH ROW
BEGIN
    INSERT INTO BACKUP_EMP VALUES (:NEW.E_ID, :NEW.NAME, :NEW.SALARY);
END;
/

-- Add columns to backup table
ALTER TABLE BACKUP_EMP ADD (
  DELETED_AT DATE,
  DELETED_BY VARCHAR2(50)
);

-- Trigger to log delete time and username
CREATE OR REPLACE TRIGGER t3
BEFORE DELETE ON EMPLOYEE
FOR EACH ROW
BEGIN
  INSERT INTO BACKUP_EMP  
  VALUES (:OLD.E_ID, :OLD.NAME, :OLD.SALARY, SYSDATE, USER);
END;
/
```

## Solutions to Problem Practice

(You should add screenshots of execution/output to the Markdown as instructed in the lab.)

### Problem 1: Insert Student Procedure
```sql
CREATE OR REPLACE PROCEDURE insert_student (
    p_student_id      IN NUMBER,
    p_name            IN VARCHAR2,
    p_semester_fee    IN NUMBER,
    p_current_semester IN VARCHAR2,
    p_dept_name       IN VARCHAR2
)
IS
BEGIN
    INSERT INTO students VALUES (p_student_id, p_name, p_semester_fee, p_current_semester, p_dept_name);
END insert_student;
/
```

### Problem 2: Update Fee Procedure with OUT parameter
```sql
CREATE OR REPLACE PROCEDURE update_fee (
    p_student_id IN NUMBER,
    p_amount     IN NUMBER,
    p_new_fee    OUT NUMBER
)
IS
BEGIN
    UPDATE students
    SET semester_fee = semester_fee + p_amount
    WHERE student_id = p_student_id;

    SELECT semester_fee INTO p_new_fee
    FROM students
    WHERE student_id = p_student_id;

    DBMS_OUTPUT.PUT_LINE('Updated Semester Fee: ' || p_new_fee);
END update_fee;
/
```

### Problem 3: Scholarship Calculation Function
```sql
CREATE OR REPLACE FUNCTION calculate_scholarship (
    p_semester_fee IN NUMBER
)
RETURN NUMBER
IS
    scholarship NUMBER;
BEGIN
    scholarship := p_semester_fee * 0.15;
    RETURN scholarship;
END calculate_scholarship;
/
```

### Problem 4: Create Table for Backup Students
```sql
CREATE TABLE backup_students (
    student_id      NUMBER PRIMARY KEY,
    name            VARCHAR2(50),
    semester_fee    NUMBER,
    current_semester VARCHAR2(20),
    dept_name       VARCHAR2(50),
    deleted_at      DATE,
    deleted_by      VARCHAR2(50)
);
```

### Problem 5: BEFORE DELETE Trigger for Students Table
```sql
CREATE OR REPLACE TRIGGER backup_student_before_delete
BEFORE DELETE ON students
FOR EACH ROW
BEGIN
    INSERT INTO backup_students
    VALUES (:OLD.student_id, :OLD.name, :OLD.semester_fee, :OLD.current_semester, :OLD.dept_name, SYSDATE, USER);
END;
/
```

### Problem 6: BEFORE UPDATE Trigger for Students Table
```sql
CREATE OR REPLACE TRIGGER backup_student_before_update
BEFORE UPDATE ON students
FOR EACH ROW
BEGIN
    INSERT INTO backup_students
    VALUES (:OLD.student_id, :OLD.name, :OLD.semester_fee, :OLD.current_semester, :OLD.dept_name, SYSDATE, USER);
END;
/
```

### Problem 7: AFTER INSERT Trigger for Students Table
```sql
CREATE OR REPLACE TRIGGER backup_student_after_insert
AFTER INSERT ON students
FOR EACH ROW
BEGIN
    INSERT INTO backup_students
    VALUES (:NEW.student_id, :NEW.name, :NEW.semester_fee, :NEW.current_semester, :NEW.dept_name, SYSDATE, USER);
END;
/
```

***

# Lab 3 (PL/SQL Cursors and Exception Handling)

**CSE464_Lab3.md**

## Provided Code Blocks
```sql
-- Increase salary for employees with salary < 5000
BEGIN
    UPDATE employee
    SET salary = salary + 500  
    WHERE salary < 5000;
    DBMS_OUTPUT.PUT_LINE('Rows updated: ' || SQL%ROWCOUNT);
END;
/

-- Select employee name and salary
DECLARE
    v_name employee.name%TYPE;
    v_salary employee.salary%TYPE;
BEGIN
    SELECT name, salary INTO v_name, v_salary
    FROM employee
    WHERE E_ID = 2;
    DBMS_OUTPUT.PUT_LINE('Name: ' || v_name || ' Salary: ' || v_salary);
END;
/

-- Update salary and print success/failure
BEGIN
    UPDATE employee
    SET salary = salary + 300
    WHERE e_id = 3;
    IF SQL%FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Update succeeded.');
    ELSE
        DBMS_OUTPUT.PUT_LINE('Record not found.');
    END IF;
END;
/

-- Select with exception handling
DECLARE
    v_name   employee.name%TYPE;
    v_salary employee.salary%TYPE;
BEGIN
    SELECT name, salary INTO v_name, v_salary
    FROM employee
    WHERE e_id = 10;
    DBMS_OUTPUT.PUT_LINE('Name: ' || v_name || ', Salary: ' || v_salary);
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Employee not found.');
END;
/
```

## Solutions to Problem Practice

### Problem 1 (Create Table):
```sql
CREATE TABLE instructor_2020360001 (
    id        NUMBER PRIMARY KEY,
    name      VARCHAR2(50),
    dept_name VARCHAR2(50),
    salary    NUMBER
);
```

### Problem 2 (Insert Rows):
```sql
INSERT INTO instructor_2020360001 VALUES (10101, 'Srinivasan', 'Comp. Sci.', 65000);
INSERT INTO instructor_2020360001 VALUES (12121, 'Wasif', 'Finance', 90000);
INSERT INTO instructor_2020360001 VALUES (15151, 'Mozart', 'Music', 40000);
INSERT INTO instructor_2020360001 VALUES (22222, 'Einstein', 'Physics', 95000);
INSERT INTO instructor_2020360001 VALUES (32343, 'El Said', 'History', 60000);
INSERT INTO instructor_2020360001 VALUES (33456, 'Goblin', 'Physics', 87000);
INSERT INTO instructor_2020360001 VALUES (45565, 'Katz', 'Comp. Sci.', 75000);
INSERT INTO instructor_2020360001 VALUES (58583, 'Califieri', 'History', 62000);
```

### Problem 3 (Implicit Cursor: Update Salary)
```sql
BEGIN
    UPDATE instructor_2020360001
    SET salary = salary + 500
    WHERE id = 15151;
    DBMS_OUTPUT.PUT_LINE('Rows updated: ' || SQL%ROWCOUNT);
END;
/
```

### Problem 4 (Select Details with %TYPE)
```sql
DECLARE
    v_name instructor_2020360001.name%TYPE;
    v_salary instructor_2020360001.salary%TYPE;
BEGIN
    SELECT name, salary INTO v_name, v_salary
    FROM instructor_2020360001
    WHERE id = 22222;
    DBMS_OUTPUT.PUT_LINE('Name: ' || v_name || ', Salary: ' || v_salary);
END;
/
```

### Problem 5 (Exception Handling)
```sql
DECLARE
    v_name instructor_2020360001.name%TYPE;
    v_salary instructor_2020360001.salary%TYPE;
BEGIN
    SELECT name, salary INTO v_name, v_salary
    FROM instructor_2020360001
    WHERE id = 99999;
    DBMS_OUTPUT.PUT_LINE('Name: ' || v_name || ', Salary: ' || v_salary);
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Instructor not found.');
END;
/
```

### Problem 6 (Explicit Cursor: Print Details of All Instructors)
```sql
DECLARE
    v_id instructor_2020360001.id%TYPE;
    v_name instructor_2020360001.name%TYPE;
    v_dept instructor_2020360001.dept_name%TYPE;
    v_salary instructor_2020360001.salary%TYPE;
    CURSOR c_instructor IS
        SELECT id, name, dept_name, salary FROM instructor_2020360001;
BEGIN
    OPEN c_instructor;
    LOOP
        FETCH c_instructor INTO v_id, v_name, v_dept, v_salary;
        EXIT WHEN c_instructor%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE('ID: ' || v_id || ', Name: ' || v_name || ', Dept: ' || v_dept || ', Salary: ' || v_salary);
    END LOOP;
    CLOSE c_instructor;
END;
/
```

### Problem 7 (Delete Instructor with Output)
```sql
BEGIN
    DELETE FROM instructor_2020360001 WHERE id = 12345;
    IF SQL%NOTFOUND THEN
        DBMS_OUTPUT.PUT_LINE('Instructor not found');
    ELSE
        DBMS_OUTPUT.PUT_LINE('Instructor deleted successfully');
    END IF;
END;
/
```

### Problem 8 (Explicit Cursor: Update Salary for <60000)
```sql
DECLARE
    v_id instructor_2020360001.id%TYPE;
    v_salary instructor_2020360001.salary%TYPE;
    v_count NUMBER := 0;
    CURSOR c_low_salary IS
        SELECT id, salary FROM instructor_2020360001 WHERE salary < 60000;
BEGIN
    OPEN c_low_salary;
    LOOP
        FETCH c_low_salary INTO v_id, v_salary;
        EXIT WHEN c_low_salary%NOTFOUND;
        UPDATE instructor_2020360001 SET salary = salary + 1000 WHERE id = v_id;
        v_count := v_count + 1;
    END LOOP;
    CLOSE c_low_salary;
    DBMS_OUTPUT.PUT_LINE('Total instructors updated: ' || v_count);
END;
/
```

***

**You can copy/paste any section above into your preferred editor or directly into your database environment as needed.**

[1] https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/78216237/917b7927-aa3a-47c2-8dc8-6d352d81422b/CSE464_Lab4.pdf
